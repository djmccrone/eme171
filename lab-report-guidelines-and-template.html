<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Lab Report Guidelines and Template | EME 171: Analysis, Simulation and Design of Mechatronic Systems
</title>
  <link rel="canonical" href="https://moorepants.github.io/eme171/lab-report-guidelines-and-template.html">


  <link rel="stylesheet" href="https://moorepants.github.io/eme171/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://moorepants.github.io/eme171/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://moorepants.github.io/eme171/theme/css/pygments/emacs.min.css">
  <link rel="stylesheet" href="https://moorepants.github.io/eme171/theme/css/theme.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="https://moorepants.github.io/eme171/feeds/all.atom.xml">
  
  <meta name="description" content="Lab Report Guidelines Lab reports prepared for EME 171 should meet the following guidelines: One lab report per group. Lab reports must be submitted online on Canvas. You may scan or take pictures of hand-calculations or hand-drawn figures (such as bond graphs) to include them in the report. Start each â€¦">
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o);
      a.async = 1;
      a.src = g;
      m = s.getElementsByTagName(o)[0];
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-15966419-8', 'auto');
    ga('send', 'pageview');
  </script>


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
  <div class="col-sm-12">
    <h1 class="title"><a href="https://moorepants.github.io/eme171/">EME 171: Analysis, Simulation and Design of Mechatronic Systems</a></h1>
      <ul class="list-inline">
            <li class="list-inline-item"><a href="https://moorepants.github.io/eme171/">Syllabus</a></li>
            <li class="list-inline-item"><a href="https://moorepants.github.io/eme171/schedule.html">Schedule</a></li>
            <li class="list-inline-item"><a href="https://moorepants.github.io/eme171/resources.html">Resources</a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Lab Report Guidelines and Template
</h1>
      <hr>

<article class="article">
  <div class="content">
    <div class="section" id="lab-report-guidelines">
<h2>Lab Report Guidelines</h2>
<p>Lab reports prepared for EME 171 should meet the following guidelines:</p>
<ul class="simple">
<li>One lab report per group.</li>
<li>Lab reports must be submitted online on Canvas. You may scan or take pictures
of hand-calculations or hand-drawn figures (such as bond graphs) to include
them in the report.</li>
<li>Start each report with a title page containing the following information:<ul>
<li>Lab assignment name &amp; number</li>
<li>Course</li>
<li>Quarter</li>
<li>Year</li>
<li>Date</li>
<li>Your names</li>
<li>Student IDs</li>
</ul>
</li>
<li>Include a brief introduction explaining the system, simulation, and learning
objectives.</li>
<li>Reports must include the bond graph, the equations of motion, and the
parameters used.</li>
<li>Reports must include a list of the system's states and parameters, and must
clearly explain any computed values such as time parameters, initial
conditions, and derived parameters.</li>
<li>Use both text and plots to explain your work and findings and to answer the
questions presented in the lab. Write the report such that a reader can
understand the topic given only your document. All results should be
explained with text (complete sentences and paragraphs) interwoven among the
figures that you present.</li>
<li>Be sure to use clear, concise language. Omit needless words. Grammar,
spelling, conciseness, structure, organization, and formatting will be
assessed.</li>
<li>All plots should have:<ul>
<li>Axes labeled with units</li>
<li>Axes limits set to show the important aspects of the graph</li>
<li>Fonts large enough to read (&gt;= 8pt)</li>
<li>A figure number, short title, and caption explaining what the figure is</li>
<li>Legends to describe multiple lines on a single plot</li>
</ul>
</li>
<li>Include your code in the report in an appendix.<ul>
<li>Show each function and the main script. These should be monospaced font
formatting and ideally syntax highlighted. You can use the publish function
in Octave and Matlab to export code files to nice formats. See
<a class="reference external" href="https://www.mathworks.com/help/matlab/matlab_prog/publishing-matlab-code.html">https://www.mathworks.com/help/matlab/matlab_prog/publishing-matlab-code.html</a>
(Links to an external site.) for more information.</li>
<li>Your code should be readable by someone else. Include comments, useful
variable names, and follow good style recommendations, for example see this
<a class="reference external" href="http://www.datatool.com/downloads/MatlabStyle2%20book.pdf">guide</a>. Imagine that you will come back to this in 10 years and you want to
be able to understand it quickly.</li>
<li>All functions should have a &quot;help&quot; description written in the standard
style describing the inputs and outputs of the function which is customized
for your particular function design. This <a class="reference external" href="https://www.mathworks.com/matlabcentral/fileexchange/4908-m-file-header-template">template</a> is useful (click the
function tab).</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="example-lab-report">
<h2>Example Lab Report</h2>
<div class="section" id="cover-page">
<h3>Cover Page</h3>
<table border="1" class="table table-bordered docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr><td>Lab 1: Introduction to Simulation</td>
</tr>
<tr><td>EME171 - Analysis, Simulation and Design of Mechatronic Systems</td>
</tr>
<tr><td>Fall 2019</td>
</tr>
<tr><td>October 18, 2019</td>
</tr>
<tr><td>Student A -- 123456789</td>
</tr>
<tr><td>Student B -- 987654321</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="introduction">
<h3>Introduction</h3>
<p>Introduce the lab material. This includes describing the system you are
simulating, providing the system diagram, bond graph, state and output
equations, and parameters, discussing the learning objectives, and so on. In
this example, the lab concerns the simulation of a nonlinear mass/spring/damper
system subjected to a force input, where the nonlinear spring has a
constitutive law</p>
<div class="math">
\begin{equation*}
F_{s} = Gq_{k}^3
\end{equation*}
</div>
<p>The goal of this lab is to linearize the spring and to demonstrate the effects
of linearization on simulation accuracy. The system and bond graph are shown in
Figure 1.</p>
<div class="figure">
<img alt="" src="https://objects-us-east-1.dream.io/eme171/2019f/example-system-and-bondgraph.png" style="width: 600px;" />
<p class="caption"><strong>Figure 1</strong>: Mechanical Schematic of Nonlinear System (left) and equivalent
bond graph (right).</p>
</div>
<p>The state equations for the nonlinear system are:</p>
<div class="math">
\begin{align*}
\dot{p}_m(t) = F(t) - G q_k(t) - \frac{b}{m}p_m(t) \\
\dot{q}_k(t) = \frac{1}{m}p_m(t)
\end{align*}
</div>
<p>The state equations for the linearized system are:</p>
<div class="math">
\begin{align*}
\dot{p}_m(t) = F(t) - k \left(q_k(t) - q_{k,eq}\right) - \frac{b}{m}p_m(t) \\
\dot{q}_k(t) = \frac{1}{m}p_m(t)
\end{align*}
</div>
<p>where <span class="math">\(p_{m}\)</span> is the momentum of the mass, <span class="math">\(q_{k}\)</span> is the spring
displacement, <span class="math">\(G\)</span> is the nonlinear spring coefficient, <span class="math">\(k\)</span> is the
linearized spring coefficient, <span class="math">\(b\)</span> is the damping coefficient, <span class="math">\(m\)</span>
is the mass, and <span class="math">\(F(t)\)</span> is the input force.</p>
<p>Additionally, the output of this simulation is the deflection from equilibrium
<span class="math">\(\delta\)</span>, where</p>
<div class="math">
\begin{equation*}
\delta = q_{k} - q_{k,eq}
\end{equation*}
</div>
</div>
<div class="section" id="calculations">
<h3>Calculations</h3>
<p>In this section, show your work for any computed variables like initial
conditions, equilibrium points, or computed parameters. Make sure to include
these here even if the calculations are present in your code. You may include
scanned images of hand computations if need be. In this example, we have a
section for computing system parameters and time parameters, but these will of
course vary with each lab.</p>
<div class="section" id="system-parameters">
<h4>System Parameters</h4>
<p>A mass <span class="math">\(m=10\)</span> kg is lowered onto a nonlinear spring and damper and
reaches its equilibrium position at  <span class="math">\(q_{k,eq}=0.25\)</span> m. Knowing this, the
nonlinear spring constant <span class="math">\(G\)</span> can be found:</p>
<div class="math">
\begin{align*}
F_{eq} = mg = 98.1N \\
G = \frac{F_{eq}}{q_{k,eq}^3} = \frac{98.1}{0.25^3} = 6272 \frac{N}{m^3}
\end{align*}
</div>
<p>The linearized spring stiffness can be found by taking the derivative of the
spring force equation at the equilibrium point.</p>
<div class="math">
\begin{equation*}
k = \left.\frac{d}{dq_k} F_s\right|_{q_k=x_e} = \left.3Gq_k^2\right|_{q_k=x_e} = 1176 \frac{N}{m}
\end{equation*}
</div>
<p>We can approximate the natural frequency from the linearized spring constant
and the mass as</p>
<div class="math">
\begin{equation*}
\omega_{n} = \sqrt{\frac{k}{m}} \approx 10.84\ rad/s
\end{equation*}
</div>
<p>From a given damping ratio of <span class="math">\(\zeta=0.3\)</span> we can find the damping
coefficient</p>
<div class="math">
\begin{equation*}
b = 2\zeta\sqrt{km} \approx 65.06 Ns/m
\end{equation*}
</div>
</div>
<div class="section" id="time-parameters">
<h4>Time Parameters</h4>
<p>Be sure to include a section for your calculations for the time parameters;
that is, how you computed the final time and the number of time steps. Even if
this work is present in your code, be sure to show it here as well.</p>
</div>
</div>
<div class="section" id="simulation">
<h3>Simulation</h3>
<p>In this section, discuss what you simulated and the ensuing results. Use both
text and plots to explain your work and findings and to answer the questions
presented in the lab. Write the report such that a reader can understand the
topic given only your document. All results should be explained with text
(complete sentences and paragraphs) interwoven among the figures that you
present. Remember to clearly label the elements of plot, including axes, axes
labels, titles, and captions. Also, if you have multiple plots on the same
graph, make sure they are visually distinct.</p>
<p>The linear and nonlinear equations of motion were simulated for <span class="math">\(F/mg =\)</span>
0.1, 0.2, 2.0, and 5.0. The results of these simulations are shown below. In
all cases, the linearized model overestimated the system's displacement. This
is because the actual spring force increased much more rapidly than the spring
force of the linearized model (specifically, cubic growth vs. linear growth).
Additionally, the linearized model kept a constant natural frequency, while the
response frequency of the nonlinear system increased with displacement. Again,
this discrepancy is due to the linearized model not accounting for the actual
system's increasing stiffness.</p>
<div class="figure">
<img alt="" src="https://objects-us-east-1.dream.io/eme171/2019f/example-results-plot.png" style="width: 600px;" />
<p class="caption"><strong>Figure 2</strong>: Comparison of results for the nonlinear and linearized
deflections.</p>
</div>
</div>
<div class="section" id="code">
<h3>Code</h3>
<p>Include all code at the end of your report. Your code should be well-commented,
and any function files you write should include a standard &quot;help&quot; description
written in the standard style describing the inputs and outputs of the
function.</p>
<p>The example code shown below does not correspond to the system above, provides
an example of what yours submitted code should look like. Make sure it is in a
fixed-width font and (ideally) has syntax highlighting.</p>
<div class="section" id="simulation-script">
<h4>Simulation Script</h4>
<div class="highlight"><pre><span></span><span class="c">% integrate the ODEs as defined above</span>
<span class="n">x0</span> <span class="p">=</span> <span class="p">[</span><span class="mi">5</span><span class="o">*</span><span class="nb">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">;</span> <span class="mi">0</span><span class="p">];</span>
<span class="n">ts</span> <span class="p">=</span> <span class="nb">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="n">m</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">p</span><span class="p">.</span><span class="n">l</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">p</span><span class="p">.</span><span class="n">g</span> <span class="p">=</span> <span class="mf">9.81</span><span class="p">;</span>
<span class="n">f_anon</span> <span class="p">=</span> <span class="p">@(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="n">eval_rhs_with_input</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="p">@</span><span class="n">eval_input</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
<span class="p">[</span><span class="n">ts</span><span class="p">,</span> <span class="n">xs</span><span class="p">]</span> <span class="p">=</span> <span class="n">ode45</span><span class="p">(</span><span class="n">f_anon</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">x0</span><span class="p">);</span>

<span class="c">% to compute the outputs at each time, loop through time evaluating f(t, x,</span>
<span class="c">% r, p) and then h(t, x&#39;, x, r, p)</span>
<span class="n">zs</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="nb">length</span><span class="p">(</span><span class="n">ts</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>  <span class="c">% place to store outputs</span>
<span class="k">for</span> <span class="nb">i</span><span class="p">=</span><span class="mi">1</span><span class="p">:</span><span class="nb">length</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
    <span class="c">% calculate x&#39; at the given time</span>
    <span class="n">xdot</span> <span class="p">=</span> <span class="n">eval_rhs_with_input</span><span class="p">(</span><span class="n">ts</span><span class="p">(</span><span class="nb">i</span><span class="p">),</span> <span class="n">xs</span><span class="p">(</span><span class="nb">i</span><span class="p">,</span> <span class="p">:),</span> <span class="p">@</span><span class="n">eval_input</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
    <span class="c">% calculate the outputs that depend on x&#39; and store them</span>
    <span class="n">zs</span><span class="p">(</span><span class="nb">i</span><span class="p">,</span> <span class="p">:)</span> <span class="p">=</span> <span class="n">eval_output_with_state_derivatives</span><span class="p">(</span><span class="n">ts</span><span class="p">(</span><span class="nb">i</span><span class="p">),</span> <span class="n">xdot</span><span class="p">,</span> <span class="n">xs</span><span class="p">(</span><span class="nb">i</span><span class="p">,</span> <span class="p">:),</span> <span class="p">@</span><span class="n">eval_input</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span><span class="n"></span>
<span class="n">end</span>
</pre></div>
</div>
<div class="section" id="input-function">
<h4>Input Function</h4>
<div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span>r <span class="p">=</span><span class="w"> </span><span class="nf">eval_step_input</span><span class="p">(</span>t, x, p<span class="p">)</span><span class="w"></span>
<span class="c">% EVAL_STEP_INPUT - Returns the input vector at any given time.</span>
<span class="c">%</span>
<span class="c">% Syntax: r = eval_step_input(t, x, p)</span>
<span class="c">%</span>
<span class="c">% Inputs:</span>
<span class="c">%   t - Scalar value of time, size 1x1.</span>
<span class="c">%   x - State vector at time t, size mx1 where m is the number of states.</span>
<span class="c">%   p - Constant parameter structure with p items where p is the number of</span>
<span class="c">%       parameters.</span>
<span class="c">% Outputs:</span>
<span class="c">%   r - Input vector at time t, size ox1 where o is the number of inputs.</span>

<span class="c">% NOTE : x and p are not used in this case</span>

<span class="c">% calculate the step input</span>
<span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mf">1.0</span>
    <span class="n">tau</span> <span class="p">=</span> <span class="mf">0.5</span><span class="p">;</span>  <span class="c">% [N]</span>
<span class="k">else</span>
    <span class="n">tau</span> <span class="p">=</span> <span class="mf">0.0</span><span class="p">;</span> <span class="c">% [N]</span>
<span class="k">end</span>

<span class="c">% pack the input values into a ox1 vector</span>
<span class="n">r</span> <span class="p">=</span> <span class="p">[</span><span class="n">tau</span><span class="p">];</span><span class="n"></span>

<span class="n">end</span>
</pre></div>
</div>
<div class="section" id="state-equations-function">
<h4>State Equations Function</h4>
<div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span>xdot <span class="p">=</span><span class="w"> </span><span class="nf">eval_rhs_with_input</span><span class="p">(</span>t, x, w, p<span class="p">)</span><span class="w"></span>
<span class="c">% EVAL_RHS_WITH_INPUT - Returns the time derivative of the states, i.e.</span>
<span class="c">% evaluates the right hand side of the explicit ordinary differential</span>
<span class="c">% equations.</span>
<span class="c">%</span>
<span class="c">% Syntax: xdot = eval_rhs_with_input(t, x, w, p)</span>
<span class="c">%</span>
<span class="c">% Inputs:</span>
<span class="c">%   t - Scalar value of time, size 1x1.</span>
<span class="c">%   x - State vector at time t, size mx1 where m is the number of states.</span>
<span class="c">%   w - Anonymous function, w(t, x, p), that returns the input vector at</span>
<span class="c">%       time t, size ox1 were o is the number of inputs.</span>
<span class="c">%   p - Constant parameter structure with p items where p is the number of</span>
<span class="c">%       parameters.</span>
<span class="c">% Outputs:</span>
<span class="c">%   xdot - Time derivative of the states at time t, size mx1.</span>

<span class="c">% unpack the states into useful variable names</span>
<span class="n">theta</span> <span class="p">=</span> <span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">omega</span> <span class="p">=</span> <span class="n">x</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="c">% evaluate the input function</span>
<span class="n">r</span> <span class="p">=</span> <span class="n">w</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>

<span class="c">% unpack the inputs into useful variable names</span>
<span class="n">tau</span> <span class="p">=</span> <span class="n">r</span><span class="p">;</span>
<span class="c">% if more than one input, then tau = r(1);, ...</span>

<span class="c">% unpack the parameters into useful variable names</span>
<span class="n">m</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">m</span><span class="p">;</span>
<span class="n">l</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">l</span><span class="p">;</span>
<span class="n">g</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">g</span><span class="p">;</span>

<span class="c">% calculate the state derivatives</span>
<span class="n">thetadot</span> <span class="p">=</span> <span class="n">omega</span><span class="p">;</span>
<span class="n">omegadot</span> <span class="p">=</span> <span class="p">(</span><span class="o">-</span><span class="n">m</span><span class="o">*</span><span class="n">g</span><span class="o">*</span><span class="n">l</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="n">tau</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">l</span>^<span class="mi">2</span><span class="p">);</span>

<span class="c">% pack the state derivatives into an mx1 vector</span>
<span class="n">xdot</span> <span class="p">=</span> <span class="p">[</span><span class="n">thetadot</span><span class="p">;</span> <span class="n">omegadot</span><span class="p">];</span><span class="n"></span>

<span class="n">end</span>
</pre></div>
</div>
<div class="section" id="output-function">
<h4>Output Function</h4>
<div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span>y <span class="p">=</span><span class="w"> </span><span class="nf">eval_output</span><span class="p">(</span>t, x, r, p<span class="p">)</span><span class="w"></span>
<span class="c">% EVAL_OUTPUT - Returns the output vector at the specified time.</span>
<span class="c">%</span>
<span class="c">% Syntax: y = eval_output(t, x, r, p)</span>
<span class="c">%</span>
<span class="c">% Inputs:</span>
<span class="c">%   t - Scalar value of time, size 1x1.</span>
<span class="c">%   x - State vector at time t, size mx1 where m is the number of states.</span>
<span class="c">%   r - Input vector at time t, size ox1 where o is the number of</span>
<span class="c">%       inputs.</span>
<span class="c">%   p - Constant parameter structure with p items where p is the number of</span>
<span class="c">%       parameters.</span>
<span class="c">% Outputs:</span>
<span class="c">%   y - Output vector at time t, size qx1 where q is the number of outputs.</span>

<span class="c">% unpacke the states</span>
<span class="n">theta</span> <span class="p">=</span> <span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">omega</span> <span class="p">=</span> <span class="n">x</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="c">% unpack the parameters</span>
<span class="n">m</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">m</span><span class="p">;</span>
<span class="n">l</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">l</span><span class="p">;</span>
<span class="n">g</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">g</span><span class="p">;</span>

<span class="c">% calculate the Cartesian position of the pendulum bob</span>
<span class="n">x_pos</span> <span class="p">=</span> <span class="n">l</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">);</span>
<span class="n">y_pos</span> <span class="p">=</span> <span class="n">l</span> <span class="o">-</span> <span class="n">l</span><span class="o">*</span><span class="nb">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">);</span>  <span class="c">% position relative to stable equilibrium</span>

<span class="c">% calculate the kinetic and potential energies</span>
<span class="n">kinetic_energy</span> <span class="p">=</span> <span class="n">m</span><span class="o">*</span><span class="n">l</span>^<span class="mi">2</span><span class="o">*</span><span class="n">omega</span>^<span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
<span class="n">potential_energy</span> <span class="p">=</span> <span class="n">m</span><span class="o">*</span><span class="n">g</span><span class="o">*</span><span class="n">y_pos</span><span class="p">;</span>

<span class="c">% pack the outputs into a qx1 vector</span>
<span class="n">y</span> <span class="p">=</span> <span class="p">[</span><span class="n">x_pos</span><span class="p">;</span> <span class="n">y_pos</span><span class="p">;</span> <span class="n">kinetic_energy</span><span class="p">;</span> <span class="n">potential_energy</span><span class="p">];</span><span class="n"></span>

<span class="n">end</span>
</pre></div>
</div>
<div class="section" id="output-function-with-state-derivatives">
<h4>Output Function with State Derivatives</h4>
<div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span>z <span class="p">=</span><span class="w"> </span><span class="nf">eval_output_with_state_derivatives</span><span class="p">(</span>t, xdot, x, r, p<span class="p">)</span><span class="w"></span>
<span class="c">% EVAL_OUTPUT_WITH_STATE_DERIVATIVES - Returns the output vector at the</span>
<span class="c">% specified time.</span>
<span class="c">%</span>
<span class="c">% Syntax: z = eval_output_with_state_derivatives(t, xdot, x, r, p)</span>
<span class="c">%</span>
<span class="c">% Inputs:</span>
<span class="c">%   t - Scalar value of time, size 1x1.</span>
<span class="c">%   xdot - State derivative vector as time t, size mx1 where m is the number</span>
<span class="c">%          of states.</span>
<span class="c">%   x - State vector at time t, size mx1 where m is the number of states.</span>
<span class="c">%   r - Input vector at time t, size ox1 were o is the number of inputs.</span>
<span class="c">%   p - Constant parameter structure with p items where p is the number of</span>
<span class="c">%       parameters.</span>
<span class="c">% Outputs:</span>
<span class="c">%   z - Output vector at time t, size qx1.</span>

<span class="c">% unpack all of the vectors</span>
<span class="n">thetadot</span> <span class="p">=</span> <span class="n">xdot</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">omegadot</span> <span class="p">=</span> <span class="n">xdot</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="n">theta</span> <span class="p">=</span> <span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">omega</span> <span class="p">=</span> <span class="n">x</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="n">m</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">m</span><span class="p">;</span>
<span class="n">l</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">l</span><span class="p">;</span>
<span class="n">g</span> <span class="p">=</span> <span class="n">p</span><span class="p">.</span><span class="n">g</span><span class="p">;</span>

<span class="c">% calculate the radial and tangential accelerations</span>
<span class="n">radial_acc</span> <span class="p">=</span> <span class="n">omega</span>^<span class="mi">2</span> <span class="o">*</span> <span class="n">l</span><span class="p">;</span>
<span class="n">tangential_acc</span> <span class="p">=</span> <span class="n">omegadot</span> <span class="o">*</span> <span class="n">l</span><span class="p">;</span>

<span class="c">% pack the result into a qx1 vector</span>
<span class="n">z</span> <span class="p">=</span> <span class="p">[</span><span class="n">radial_acc</span><span class="p">;</span> <span class="n">tangential_acc</span><span class="p">];</span><span class="n"></span>

<span class="n">end</span>
</pre></div>
</div>
</div>
</div>
<script type='text/javascript'>if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
</article>


    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
      <li class="list-inline-item"><a href="https://moorepants.github.io/eme171/authors.html">Authors</a></li>
    <li class="list-inline-item"><a href="https://moorepants.github.io/eme171/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="https://moorepants.github.io/eme171/categories.html">Categories</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>
<div class="row">
  <div class="col-sm-4 mx-auto text-center text-muted" >
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    </a>
    <br />
    This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
  </div>
</div>    </div>
  </footer>
</body>

</html>